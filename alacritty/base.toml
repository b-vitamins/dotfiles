[env]
TERM = "xterm-256color"

[window]
dimensions = { columns = 100, lines = 30 }
padding = { x = 12, y = 10 }
dynamic_padding = true
decorations = "Full"
startup_mode = "Windowed"
title = "Terminal"
dynamic_title = true
option_as_alt = "Both"  # Important for Emacs bindings on macOS

[scrolling]
history = 100000
multiplier = 3

[font]
size = 13.0
offset = { x = 0, y = 2 }
glyph_offset = { x = 0, y = 1 }
builtin_box_drawing = true

# Try these fonts for better experience (in order of preference)
[font.normal]
family = "Fira Code"  # or "JetBrains Mono", "Fira Mono", "Cascadia Code"
style = "Regular"

[font.bold]
family = "Fira Code"
style = "Bold"

[font.italic]
family = "Fira Code"
style = "Light Italic"

[font.bold_italic]
family = "Fira Code"
style = "Medium Italic"

[selection]
semantic_escape_chars = ",│`|:\"' ()[]{}<>\\t"
save_to_clipboard = true

[cursor]
style = { shape = "Beam", blinking = "On" }
vi_mode_style = { shape = "Block", blinking = "Off" }  # Disabled in zsh anyway
blink_interval = 600
blink_timeout = 0
unfocused_hollow = true
thickness = 0.15

[terminal]
osc52 = "CopyPaste"

[mouse]
hide_when_typing = true
bindings = [
    { mouse = "Right", action = "Paste" },
    { mouse = "Middle", action = "Paste" },
]

[hints]
alphabet = "asdfghjklqwertyuiopzxcvbnm"

[[hints.enabled]]
command = "xdg-open"  # From xdg-utils (Linux/BSD); use "open" on macOS
hyperlinks = true
post_processing = true
persist = false
mouse.enabled = true
binding = { key = "U", mods = "Control|Shift" }
regex = "(ipfs:|ipns:|magnet:|mailto:|gemini://|gopher://|https://|http://|news:|file:|git://|ssh:|ftp://)[^\u0000-\u001F\u007F-\u009F<>\"\\s{-}\\^⟨⟩`]+"

[[hints.enabled]]
action = "Copy"
hyperlinks = true
post_processing = true
persist = false
mouse.enabled = false
binding = { key = "Y", mods = "Control|Shift" }
regex = "(ipfs:|ipns:|magnet:|mailto:|gemini://|gopher://|https://|http://|news:|file:|git://|ssh:|ftp://)[^\u0000-\u001F\u007F-\u009F<>\"\\s{-}\\^⟨⟩`]+"

[keyboard]
bindings = [
    # Let zsh handle most Emacs bindings - only define what alacritty needs to translate

    # Alt key fixes for macOS (if option_as_alt doesn't work perfectly)
    { key = "F", mods = "Alt", chars = "\u001bf" },     # Alt-f forward word
    { key = "B", mods = "Alt", chars = "\u001bb" },     # Alt-b backward word
    { key = "D", mods = "Alt", chars = "\u001bd" },     # Alt-d delete word
    { key = "Left", mods = "Alt", chars = "\u001bb" },  # Alt-Left
    { key = "Right", mods = "Alt", chars = "\u001bf" }, # Alt-Right
    { key = "Backspace", mods = "Alt", chars = "\u001b\u007f" },

    # Clipboard - native alacritty actions
    { key = "V", mods = "Control|Shift", action = "Paste" },
    { key = "C", mods = "Control|Shift", action = "Copy" },
    { key = "Insert", mods = "Shift", action = "Paste" },
    { key = "Insert", mods = "Control", action = "Copy" },

    # Font Size
    { key = "Plus", mods = "Control", action = "IncreaseFontSize" },
    { key = "Equals", mods = "Control", action = "IncreaseFontSize" },
    { key = "Minus", mods = "Control", action = "DecreaseFontSize" },
    { key = "Key0", mods = "Control", action = "ResetFontSize" },

    # Scrolling
    { key = "PageUp", mods = "Shift", action = "ScrollPageUp" },
    { key = "PageDown", mods = "Shift", action = "ScrollPageDown" },
    { key = "Home", mods = "Shift", action = "ScrollToTop" },
    { key = "End", mods = "Shift", action = "ScrollToBottom" },
    { key = "Up", mods = "Control|Shift", action = "ScrollLineUp" },
    { key = "Down", mods = "Control|Shift", action = "ScrollLineDown" },

    # Window Management
    { key = "N", mods = "Control|Shift", action = "SpawnNewInstance" },
    { key = "Return", mods = "Control|Shift", action = "ToggleFullscreen" },
    { key = "M", mods = "Control|Shift", action = "ToggleMaximized" },

    # Search mode
    { key = "F", mods = "Control|Shift", action = "SearchForward" },
    { key = "B", mods = "Control|Shift", action = "SearchBackward" },

    # Clear screen and scrollback
    { key = "L", mods = "Control|Shift", action = "ClearLogNotice" },
    { key = "K", mods = "Control|Shift", action = "ClearHistory" },
]

[debug]
render_timer = false
persistent_logging = false
log_level = "Warn"
print_events = false
prefer_egl = true
