# MPV Ultra High-Quality Configuration

# Audio
ao=pulse
audio-channels=stereo
audio-normalize-downmix=yes
audio-pitch-correction=yes
audio-resample-filter-size=32
audio-resample-phase-shift=10
audio-resample-cutoff=0.96

# GPU/Video Output
vo=gpu-next
gpu-api=vulkan
hwdec=nvdec-copy
vulkan-async-transfer=yes
vulkan-async-compute=yes
vulkan-queue-count=8

# Frame Timing
video-sync=display-resample
interpolation=yes
tscale=oversample
tscale-blur=0.9812505644268356
tscale-radius=3.0
tscale-clamp=0.0

# Scaling Filters
scale=ewa_lanczos
dscale=mitchell
cscale=ewa_lanczos

# Shaders
glsl-shaders-clr
glsl-shader="~~/shaders/FSRCNNX_x2_8-0-4-1.glsl"   # Neural network upscaler
glsl-shader="~~/shaders/SSimDownscaler.glsl"       # SSIM-based perceptual downscaling
glsl-shader="~~/shaders/KrigBilateral.glsl"        # Chroma reconstruction

scale-antiring=0.7
dscale-antiring=0.7
cscale-antiring=1.0
correct-downscaling=yes
linear-downscaling=yes
sigmoid-upscaling=yes

# HDR Tone Mapping
tone-mapping=bt.2446a
tone-mapping-param=1.0
tone-mapping-max-boost=1.5
hdr-compute-peak=yes
hdr-peak-percentile=99.995
hdr-scene-threshold-low=1.0
hdr-scene-threshold-high=3.0
allow-delayed-peak-detect=yes

# Color Management
target-prim=bt.709
target-trc=srgb
target-peak=120
target-contrast=inf
gamut-mapping-mode=perceptual
icc-profile-auto=yes
icc-3dlut-size=64x64x64

# Debanding
deband=yes
deband-iterations=4
deband-threshold=48
deband-range=32
deband-grain=24

# Frame Handling
framedrop=no
display-fps-override=60
video-latency-hacks=no

# Dithering
dither-depth=10
temporal-dither=yes
dither=fruit

# Cache
cache=yes
cache-secs=300
demuxer-max-bytes=8192MiB
demuxer-max-back-bytes=4096MiB
demuxer-readahead-secs=300
stream-buffer-size=8MiB

# Screenshots
screenshot-format=png
screenshot-png-compression=0
screenshot-high-bit-depth=yes
screenshot-directory="~/Pictures/mpv"

# Subtitles
sub-auto=fuzzy
sub-font="SF Pro Display"
sub-font-size=48
sub-border-size=2.5
sub-border-color="0.0/0.0/0.0/0.8"
sub-color="1.0/1.0/1.0/1.0"
sub-shadow-offset=2
sub-shadow-color="0.0/0.0/0.0/0.6"
sub-blur=0.3
sub-margin-y=50
sub-ass-override=force
blend-subtitles=video

# OSD - macOS Aesthetic
osc=yes
osd-font="SF Pro Display"
osd-font-size=32
osd-color="#FFFFFF"
osd-border-color="#000000"
osd-border-size=1.2
osd-shadow-offset=0.5
osd-shadow-color="#000000B0"
osd-blur=0.3
osd-bold=no
osd-spacing=0.5

# Progress Bar - Thin & Elegant
osd-bar-align-x=0
osd-bar-align-y=0.95
osd-bar-w=95
osd-bar-h=2.5
osd-duration=2000
osd-on-seek=msg-bar

# Window
title="${media-title:${filename/no-ext}} â€” mpv"
background=color
background-color=0.1/0.1/0.1        # Dark gray in RGB format (0-1 range)
cursor-autohide=1000
cursor-autohide-fs-only=yes
window-scale=1.0

# Profiles
[HDR-Film]
deband-threshold=35
deband-grain=32

[HDR-Animation]
deband=no
scale=ewa_lanczos
cscale=mitchell

# Misc
save-position-on-quit=yes
keep-open=yes
msg-level=all=warn
osd-duration=2000
cursor-autohide=1000
geometry=50%:50%
autofit-larger=90%x90%